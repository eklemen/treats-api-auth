{"version":3,"sources":["../../server/models/house.js"],"names":["mongoose","require","Promise","global","Schema","houseSchema","isDeleted","type","Boolean","default","createdAt","Date","now","creator","String","votes","vote","Number","max","min","created_at","timestamps","pre","next","console","log","length","push","House","model"],"mappings":";;;;;AAAA,IAAMA,WAAWC,QAAQ,UAAR,CAAjB;AACAD,SAASE,OAAT,GAAmBC,OAAOD,OAA1B;IACQE,M,GAAWJ,Q,CAAXI,M;;;AAER,IAAMC,cAAc,IAAID,MAAJ,CAAW;AAC3BE,eAAW,EAAEC,MAAMC,OAAR,EAAiBC,SAAS,KAA1B,EADgB;AAE3BC,eAAW,EAAEH,MAAMI,IAAR,EAAcF,SAASE,KAAKC,GAA5B,EAFgB;AAG3BC,aAASC,MAHkB;AAI3BC,WAAO,CAAC;AACJC,cAAM,EAAET,MAAMU,MAAR,EAAgBR,SAAS,CAAzB,EAA4BS,KAAK,CAAjC,EAAoCC,KAAK,CAAC,CAA1C,EADF;AAEJN,iBAASC,MAFL;AAGJM,oBAAY,EAAEb,MAAMI,IAAR,EAAcF,SAASE,KAAKC,GAA5B;AAHR,KAAD;AAJoB,CAAX,EASjB,EAAES,YAAY,EAAEX,WAAW,YAAb,EAAd,EATiB,CAApB;;AAWAL,YAAYiB,GAAZ,CAAgB,MAAhB,EAAwB,UAASC,IAAT,EAAe;AACnCC,YAAQC,GAAR,CAAY,MAAZ,EAAoB,IAApB;AACA,QAAG,CAAC,KAAKV,KAAL,CAAWW,MAAf,EAAuB;AACnB,aAAKX,KAAL,CAAWY,IAAX,CAAgB;AACZX,kBAAM,EAAET,MAAMU,MAAR,EAAgBR,SAAS,CAAzB,EADM;AAEZI,qBAASC;AAFG,SAAhB;AAIH;AACDS;AACH,CATD;;AAWA,IAAMK,QAAQ5B,SAAS6B,KAAT,CAAe,OAAf,EAAwBxB,WAAxB,CAAd;kBACeuB,K","file":"house.js","sourcesContent":["const mongoose = require('mongoose');\nmongoose.Promise = global.Promise;\nconst { Schema } = mongoose;\n\nconst houseSchema = new Schema({\n    isDeleted: { type: Boolean, default: false },\n    createdAt: { type: Date, default: Date.now },\n    creator: String,\n    votes: [{\n        vote: { type: Number, default: 1, max: 1, min: -1 },\n        creator: String,\n        created_at: { type: Date, default: Date.now }\n    }]\n}, { timestamps: { createdAt: 'created_at' } });\n\nhouseSchema.pre('save', function(next) {\n    console.log('this', this);\n    if(!this.votes.length) {\n        this.votes.push({\n            vote: { type: Number, default: 1 },\n            creator: String\n        });\n    }\n    next();\n});\n\nconst House = mongoose.model('House', houseSchema);\nexport default House;"]}